<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Gestion magasin App</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    </head>
    <body>

        <h1 style="background-color: #e9ecef">Gestion Magasin</h1>

        <div style="margin:20px">
            <p>Bienvenue sur l'application Gestion Magasin, il est {{ time }}. </p>

            <div style="display: flex">
                <div style="flex: 1">
                    <div style="display: flex">
                        <h4 style="flex: 1">Catalogue Produit</h4>
                        <div>
                            <p style="color: darkgrey; font-size: small; margin-right: 20px; margin-bottom: 0">dernière synchronisation:</p>
                            <p style="color: darkgrey; font-size: small; margin-right: 20px; margin-bottom: 5px">{{ products_update_time|date:'Y-m-d H:i:s' }}</p>
                        </div>
                        <form action={% url 'Update Products' %} method='POST'>
                            {% csrf_token %}
                            <button type="button submit" class="btn btn-outline-secondary btn-sm" style="margin-bottom: 4px">Sync</button>
                        </form>
                    </div>
                    <table class="table table-hover table-sm table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">Code produit</th>
                                <th scope="col">Famille produit</th>
                                <th scope="col">Description</th>
                                <th scope="col">Prix (en €)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for product in products %}
                                <tr>
                                    <td> {{ product.codeProduit }}</td>
                                    <td> {{ product.familleProduit }}</td>
                                    <td> {{ product.descriptionProduit }}</td>
                                    <td> {{ product.prix }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div style="flex: 0.03"></div>

                <div style="flex: 1">
                    <div style="display: flex">
                        <h4 style="flex: 1">Clients</h4>
                        <div>
                            <p style="color: darkgrey; font-size: small; margin-right: 20px; margin-bottom: 0">dernière synchronisation:</p>
                            <p style="color: darkgrey; font-size: small; margin-right: 20px; margin-bottom: 5px">{{ customers_update_time|date:'Y-m-d H:i:s' }}</p>
                        </div>
                        <form action={% url 'Update Customers' %} method='POST'>
                            {% csrf_token %}
                            <button type="button submit" class="btn btn-outline-secondary btn-sm" style="margin-bottom: 4px">Sync</button>
                        </form>
                    </div>
                    <table class="table table-hover table-sm table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">ID Compte</th>
                                <th scope="col">Nom</th>
                                <th scope="col">Prénom</th>
                                <th scope="col">Points de fidélité</th>
                                <th scope="col">Paiement</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for customer in customers %}
                                <tr>
                                    <td> {{ customer.account }}</td>
                                    <td> {{ customer.lastName }}</td>
                                    <td> {{ customer.firstName }}</td>
                                    <td> {{ customer.fidelityPoint }}</td>
                                    <td> {{ customer.payment }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </body>
</html>
